import React from 'react';
import PropTypes from 'prop-types';
import CSSModules from 'react-css-modules';
import 'antd/dist/antd.css';
import { Upload, Icon, message } from 'antd';
import { Form, FormField, FormInput, Image, Input, Label, Grid, Select } from 'semantic-ui-react';
import GoesWithItem from './GoesWithItem';
import '../../assets/styles/mm.css';


const AddMeal = ({ onSave, meal, onChange, selectValues, selectChange, getSelectValue, cardImgList, handleCardChange, addExtra, selected, goes, top, extrasList, extrasTopList, extraOptId }) => {
  // let add;
  // let extrasList = [];
  // const extId = getSelectValue(extraOptId - 1);
  let x;
  const addGoes = (
    <div key={extraOptId} data-key={extraOptId}>
      {/* <input className="col-10" id="extra" name="extra" type="text" placeholder="Extra Title" /> */}
      {/* {x = getSelectValue(extraOptId - 1)} */}
      {/* {console.log(`dsddS${x}`)} */}
      {/* check select value function not working */}
      {/* <select onChange={selectChange} value={x}> */}
      <select onChange={selectChange} >
        {/* <option disabled value="" >Select Extra</option> */}
        {/* <optgroup label="Select Extra" > */}
          {goes.map(extra =>
            <option disabled={false} value={extra.title} ext-id={extra.id}>{extra.title}</option>)
          }
        {/* </optgroup> */}
      </select>
      {/* <div className="col-2"><i className="far fa-minus-square" onClick={() => selected()} role='button' /></div> */}
      <div className="col-2" onClick={(event) => selected(event, 'goes')} role='button'><i className="fas fa-minus-circle" /></div>
    </div>
  );


  const addTop = (
    <div key={extraOptId} data-key={extraOptId}>
      <select onChange={selectChange}>
        {top.map(extra =>
          <option ext-id={extra.id}>{extra.title}</option>)
        }
      </select>
      <div className="col-2" onClick={(event) => selected(event, 'onTop')} role='button'><i className="fas fa-minus-circle" /></div>
    </div>
  );


  return (

    <div id="addContainer" className="addContainer">
      <form id="addForm" className="addForm">
        <div className="add-details">
          <div className="addImg row">
            {/* <label htmlFor="filename" style={{ color: 'rgba(0,0,0)' }}>Select Image */}
              <input id="filename" name="filename" type="file" accept="image/*" placeholder="Select Image" onChange={onChange} />
            {/* </label> */}
          </div>
          <div className="addName row">
            <input id="addFood" name="title" type="text" placeholder="Food Name" onChange={onChange} value={meal.title || ''} />
          </div>
          <div className="addName row">
            <input id="addFoodPrice" name="price" type="number" placeholder="Food Price" onChange={(event) => onChange(event)} value={meal.price || ''} />
          </div>
          <div id="addMealwith" className="addMealwith">
            <h4>Goes With</h4>
            
            {/* {
              addBtnClicked ?
              (
                <div>
                  <input className="col-10" id="extra" name="extra" type="text" placeholder="Extra Title" />
                  <div className="col-2"><i className="far fa-minus-square" onClick={() => selected()} role='button' /></div>
                </div>
              )
                :
                <div />
            } */}
            {
              extrasList.map(extraOption =>
                extraOption)
            }
            <div onClick={() => addExtra(addGoes, 'goes')} role="button" >aa<i className="far fa-plus-square" style={{ marginLeft: '18px' }} /></div>
          </div>
          <div id="addMealextra" className="addMealextra">
            <h4>Extras</h4>
            {
              extrasTopList.map(extraOption =>
                extraOption)
            }
            <div onClick={() => addExtra(addTop, 'top ')} role="button" >aa<i className="far fa-plus-square" style={{ marginLeft: '18px' }} /></div>
          
            <i className="far fa-plus-square" style={{ marginLeft: 18 + "px" }} />
          </div>
          <div>
            <input type="submit" className="add" value="Add Meal" onClick={onSave} />
          </div>
        </div>
      </form>
    </div>
  );
};

AddMeal.propTypes = {
  // mealextras: PropTypes.shape({
  //   title: PropTypes.string.isRequired,
  //   price: PropTypes.number.isRequired,
  // })
  //   .isRequired,
  addExtra: PropTypes.func.isRequired,
  selected: PropTypes.func.isRequired,
  extraOptId: PropTypes.number.isRequired,
  // addBtnClicked: PropTypes.bool.isRequired,
};

// const AddMealWithCSS = CSSModules(AddMeal, styles, { allowMultiple: true });
// export default (AddMealWithCSS);
export default AddMeal;
